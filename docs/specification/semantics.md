# Семантика языка Vaibik

## 1. Области видимости

Язык использует лексическую (статическую) область видимости.

* Глобальная область видимости: Переменные и константы, объявленные вне функций (на верхнем уровне), видны во всей программе от точки объявления до конца файла.
* Локальная область видимости: Ограничена блоком кода `ПОЕХАЛИ ... ФИНАЛОЧКА`.
* Видимость: Вложенные блоки имеют доступ к переменным внешних блоков и глобальным переменным.
* Жизненный цикл: Локальные переменные создаются при входе в блок и уничтожаются при выходе из него. Доступ к переменной вне её области видимости запрещен.

## 2. Уникальность имён

* Пространство имён: Единое для переменных, констант, функций и процедур. Нельзя назвать переменную именем существующей функции или типа данных.
* Переопределение (Shadowing): Запрещено скрывать переменные. Если переменная с именем `x` объявлена во внешней области видимости (глобальной или внутри функции), объявление новой переменной `x` во вложенном блоке считается семантической ошибкой.
* Встроенные идентификаторы: Запрещено переопределять встроенные константы (`ПИ`, `ЕШКА`) и встроенные функции.

## 3. Параметры функций и процедур

* Передача параметров: Осуществляется по значению. Копия значения фактического аргумента присваивается формальному параметру. Изменение параметра внутри функции не влияет на внешнюю переменную.
* Соответствие: Количество и типы фактических аргументов должны строго совпадать с объявлением функции.
* Порядок вычисления: Аргументы при вызове вычисляются строго слева направо.
* Локальность: Параметры функции считаются локальными переменными в теле функции.
* Возврат значения: 
   * Функция (объявленная с типом) обязана вернуть значение с помощью инструкции `ДРАТУТИ` на всех возможных путях выполнения.
   * Процедура (`ПРОКРАСТИНИРУЕМ`) не может возвращать значение (используется `ДРАТУТИ` без аргументов или неявный выход в конце блока).

## 4. Рекурсия

* Поддерживается прямая и косвенная (взаимная) рекурсия.
* Для корректной работы рекурсии стек вызовов ограничен только доступной памятью среды выполнения.

## 5. Ветвления

* Условие: Выражение в `ЕСЛИ` должно иметь строго тип `РАСКЛАД`.
* Истинность: Ветка `ТО` выполняется, если выражение равно `ХАЙП`. Ветка `ИНАЧЕ` выполняется, если выражение равно `КРИНЖ`.
* Связывание: В конструкции `ЕСЛИ ... ТО ... ИНАЧЕ` ветка `ИНАЧЕ` относится к ближайшему предшествующему оператору `ЕСЛИ`, находящемуся в той же области видимости.

## 6. Циклы

* Условие: Выражения условий в `ЦИКЛ` и `ПОКА` должны иметь тип `РАСКЛАД`.
* ЦИКЛ (с шагом):
    1.  Выполняется инициализация (один раз).
    2.  Проверяется условие. Если `КРИНЖ` — выход из цикла.
    3.  Выполняется тело цикла.
    4.  Выполняется выражение шага (инкремент).
    5.  Переход к п. 2.
* ПОКА (с предусловием): Тело выполняется до тех пор, пока условие равно `ХАЙП`. Проверка происходит перед каждой итерацией.
* Управление потоком:
    * `ХВАТИТ`: Мгновенно прерывает выполнение текущего (самого вложенного) цикла.
    * `ПРОДОЛЖАЕМ`: Мгновенно переходит к следующей итерации (в `ЦИКЛЕ` — к шагу инкремента, в `ПОКА` — к проверке условия).

## 7. Прочие правила

### 7.1. Присваивание
* Левая часть (L-value): В левой части оператора `=` может находиться только идентификатор переменной.
* Неизменяемость строк: Поскольку тип `ЦИТАТА` неизменяем, запись вида `строка[0] = "А"` запрещена.
* Константы: Переменные, объявленные через `БАЗА`, инициализируются один раз. Попытка присвоить им новое значение вызывает ошибку.

### 7.2. Инициализация
* В языке запрещено использование неинициализированных переменных. Грамматика языка требует обязательной инициализации при объявлении (`Тип имя = значение;`), что гарантирует наличие значения.